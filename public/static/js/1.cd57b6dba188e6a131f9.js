webpackJsonp([1],{63:function(e,t,a){function i(e){a(69)}var n=a(1)(a(64),a(71),i,null,null);e.exports=n.exports},64:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{create:{topic:"",meeting_feature:"common",meeting_level:"common",content:"",host:"",master:"",participant:[],duration:0,site:""},meeting_feature_option:[{label:"网络会议",meeting_feature:"net"},{label:"电话会议",meeting_feature:"phone"},{label:"普通会议",meeting_feature:"common"}],meeting_level_option:[{label:"高级",meeting_level:"high"},{label:"中级",meeting_level:"middle"},{label:"普通",meeting_level:"common"}],createRules:{topic:[{required:!0,message:"请输入会议主题",trigger:"blur"}],participant:[{required:!0,message:"请选择参与人员",trigger:"blur"}],site:[{required:!0,message:"请选择会议室",trigger:"blur"}]},time:"",date:"",sitesOption:[],participantVisible:!1,dept:[],deptProps:{id:"id",children:"children",label:"name"},transferData:[],datePickerOption:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},datetimeIsChange:!1,durationIsChange:!1}},computed:{datetime:function(){this.durationIsChange=!0;var e=new Date(this.date);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+this.time}},methods:{getDept:function(){var e=this;e.dept&&axios.get("/getDept",{}).then(function(t){var a=t.data.dept;e.dept=a}).catch(function(e){console.log(e)})},getUsers:function(e){console.log(this.create.participant);var t=this;axios.post("/getUsers",{id:e}).then(function(e){for(var a=e.data.users,i=[],n=0;n<a.length;n++)i.push({key:a[n].id,label:a[n].name});t.transferData=i}).catch(function(e){console.log(e)})},getEmptyRooms:function(){var e=this;null!=this.datetime&&0!=this.create.duration&&(e.datetimeIsChange||e.durationIsChange)&&axios.post("/getEmptyRooms",{meeting_time:e.datetime,duration:e.create.duration}).then(function(t){var a=t.data.emptyRooms;e.sitesOption=a,e.create.site=null,e.datetimeIsChange=!1,e.durationIsChange=!1}).catch(function(e){console.log(e)})},commit:function(e){var t=this;console.log(this.datetime),axios.post("/createMeeting",{data:e,meeting_time:this.datetime}).then(function(e){e.data.isSuccess?t.$message({type:"success",message:"添加成功~"}):t.$message.error("添加失败!")}).catch(function(e){console.log(e)})}},mounted:function(){this.getDept()}}},67:function(e,t,a){t=e.exports=a(61)(!0),t.push([e.i,".create_form{margin-top:3%}.el-dialog{text-align:left}","",{version:3,sources:["/Users/nikejin/GitHub/meeting/src/components/home/createMeeting.vue"],names:[],mappings:"AACA,aACE,aAAe,CAChB,AACD,WACE,eAAiB,CAClB",file:"createMeeting.vue",sourcesContent:["\n.create_form {\n  margin-top: 3%;\n}\n.el-dialog {\n  text-align: left;\n}\n"],sourceRoot:""}])},69:function(e,t,a){var i=a(67);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(62)("e93b2c46",i,!0)},71:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"create_form",attrs:{gutter:55}},[a("el-form",{ref:"create",attrs:{model:e.create,rules:e.createRules,"label-width":"90px"}},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"会议主题",prop:"topic"}},[a("el-input",{model:{value:e.create.topic,callback:function(t){e.create.topic=t},expression:"create.topic"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会议级别"}},[a("el-select",{model:{value:e.create.meeting_level,callback:function(t){e.create.meeting_level=t},expression:"create.meeting_level"}},e._l(e.meeting_level_option,function(e){return a("el-option",{key:e.meeting_level,attrs:{label:e.label,value:e.meeting_level}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"会议性质"}},[a("el-select",{model:{value:e.create.meeting_feature,callback:function(t){e.create.meeting_feature=t},expression:"create.meeting_feature"}},e._l(e.meeting_feature_option,function(e){return a("el-option",{key:e.meeting_feature,attrs:{label:e.label,value:e.meeting_feature}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"文件上传"}},[a("el-upload",{attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/","file-list":e.create.fileList,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"会议内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:e.create.content,callback:function(t){e.create.content=t},expression:"create.content"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"主办单位"}},[a("el-input",{model:{value:e.create.host,callback:function(t){e.create.host=t},expression:"create.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主持人"}},[a("el-input",{model:{value:e.create.master,callback:function(t){e.create.master=t},expression:"create.master"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参与人员",prop:"participant"}},[a("el-col",{attrs:{span:17}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.participantVisible=!0}}},[e._v("选择")])],1),e._v(" "),a("el-dialog",{attrs:{title:"参与人员选择",visible:e.participantVisible,id:"dialog"},on:{"update:visible":function(t){e.participantVisible=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-tree",{attrs:{data:e.dept,props:e.deptProps,"highlight-current":"",indent:25},on:{"current-change":e.getUsers}})],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-transfer",{attrs:{data:e.transferData,titles:["可选人员","已选人员"],indent:25},model:{value:e.create.participant,callback:function(t){e.create.participant=t},expression:"create.participant"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:!0},on:{click:function(t){e.participantVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.participantVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.datePickerOption},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-time-select",{attrs:{"picker-options":{start:"08:30",step:"00:15",end:"22:30"},placeholder:"选择时间"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时长"}},[a("el-input-number",{attrs:{step:15,min:0},on:{change:function(t){e.durationIsChange=!0}},model:{value:e.create.duration,callback:function(t){e.create.duration=t},expression:"create.duration"}}),e._v("\n        （分钟）\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"会议室",prop:"site"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",noDataText:"请选择会议时间和时长"},on:{"visible-change":e.getEmptyRooms},model:{value:e.create.site,callback:function(t){e.create.site=t},expression:"create.site"}},e._l(e.sitesOption,function(e){return a("el-option",{key:e.id,attrs:{label:e.site,value:e.id}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.commit(e.create)}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{plain:!0,type:"danger"}},[e._v("清空")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.cd57b6dba188e6a131f9.js.map